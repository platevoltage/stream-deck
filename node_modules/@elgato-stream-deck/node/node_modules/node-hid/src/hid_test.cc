#include <iostream>
#include <hidapi.h>

#include "../hidapi/linux/hid.c"

int main()
{
    hid_init();

    auto dev = hid_open(0x1edb, 0xbef0, nullptr);
    if (!dev)
    {
        std::cerr << "Failed to open device" << std::endl;
        return 1;
    }

    auto bufSize = 12;
    auto buffer = new unsigned char[bufSize + 2];
    buffer[0] = 5;

    auto bufferLength = hid_get_feature_report(dev, buffer, bufSize);
    std::cout << "len " << bufSize << " to " << bufferLength << std::endl;

    // printf("%s", (char *)buffer);
    for (auto i = 0; i < bufSize; i++)
    {
        if (i > 0)
            printf(":");
        printf("%02X", buffer[i]);
    }
    printf("\n");

    std::cout
        << "hello world" << std::endl;
}